<div
  class="blog-background"
  [style.background-image]="'url(' + backgroundImageUrl + ')'"
>
  <div class="layout-container d-flex flex-column flex-md-row">
    <div class="detail-section col-12 col-md-8">
      <div
        *ngIf="showNewWritePage === true; else blogView"
        class="d-flex flex-column justify-content-center align-items-center text-center py-5 blog-container"
      >
        <h2 class="mb-3">üì≠ ÏÉàÍ∏Ä Ïì∞Îü¨ Í∞ÄÍ∏∞!</h2>
        <button class="btn btn-secondary btn-lg" (click)="goToNewPage()">
          ‚úç Í∏ÄÏì∞Í∏∞
        </button>
      </div>

      <ng-template #blogView>
        <div class="blog-container">
          <div class="blog-title" #blogTitle tabindex="-1">
            {{ title || "(Ï†úÎ™© ÏóÜÏùå)" }}
          </div>
          <div class="blog-date">
            {{ formatPublishedDate?.slice(0, 10) }}
            @if (showToast === false) {
            <i class="bi bi-copy ms-2" title="Í∏Ä Î≥µÏÇ¨" (click)="copyBlog()"></i>
            } @if (showToast === true) {
            <span class="text-info">‚úî Î≥µÏÇ¨Îê®!</span>
            }
          </div>
          <div class="blog-content" [innerHTML]="htmlContent ?? ''"></div>

          <ng-container *ngFor="let tag of tagList; trackBy: trackByIndex">
            <div class="py-3 pe-2">
              <span class="tag-span">{{ tag }}</span>
            </div>
          </ng-container>
        </div>
      </ng-template>
    </div>

    @if(list && list.length > 0) {

    <div class="list-section col-12 col-md-4 mb-4 mb-md-0">
      <app-view-list
        [list]="list"
        [selectedBlogId]="blogId"
        [isMenuSortUp]="isMenuSortUp"
        (selectBlog)="handleBlogSelect($event)"
      ></app-view-list>
    </div>
    }
  </div>

  @if(showMiniMenu && blogId) {
  <div class="blog-toolbar">
    <div class="edit-icon-group d-flex gap-2 ms-2">
      <i
        class="bi bi-arrow-clockwise"
        (click)="setDefaultStyle()"
        title="ÏõêÎûòÎåÄÎ°ú"
      ></i>

      <i
        class="bi bi-sunglasses"
        title="ÎàÑÍ∞ÄÎ≥ºÎïå"
        (click)="setSecreteStyle()"
      ></i>

      <i
        class="bi bi-eyeglasses"
        title="Ìé∏ÏïàÌïòÍ≤å"
        (click)="setComportStyle()"
      ></i>
      <div class="font-control">
        <i
          class="bi bi-caret-up"
          title="Í∏ÄÏî® ÌÇ§Ïö∞Í∏∞"
          (click)="fontSizePlus()"
        ></i>
        <i
          class="bi bi-caret-down"
          title="Í∏ÄÏî® ÏûëÍ≤å"
          (click)="fontSizeMinus()"
        ></i>
      </div>
      <input
        type="color"
        title="ÏÉâÏÉÅ ÏÑ†ÌÉù"
        (input)="changeColor($event)"
        style="width: 30px"
      />

      <!--Î©îÎâ¥ Ïò§Î¶ÑÏ∞®Ïàú-->
      @if(isMenuSortUp === false){
      <i
        class="bi bi-sort-up"
        title="Î©îÎâ¥ Ïò§Î¶ÑÏ∞®Ïàú"
        (click)="changeSortType(true)"
      ></i>
      }

      <!--Î©îÎâ¥ ÎÇ¥Î¶ºÏ∞®Ïàú-->
      @if(isMenuSortUp === true){
      <i
        class="bi bi-sort-down"
        title="Î©îÎâ¥ ÎÇ¥Î¶ºÏ∞®Ïàú"
        (click)="changeSortType(false)"
      ></i>
      }
    </div>
    <div class="edit-icon-group d-flex gap-2 ms-2">
      @if (isLoggedIn) {
      <!-- ÏàòÏ†ïÎ≤ÑÌäº -->
      @if(blogId) {
      <div class="edit-icon">
        <i class="bi bi-pen" (click)="goToEdit()" title="ÏàòÏ†ï"></i>
      </div>
      }
      <div class="edit-icon">
        <i
          class="bi bi-pencil-square"
          (click)="goToNewPage()"
          title="+ÏÉàÍ∏Ä"
        ></i>
      </div>
      <div class="edit-icon">
        <i
          class="bi bi-list-columns"
          (click)="goToManage()"
          title="Í¥ÄÎ¶¨Î™©Î°ù"
        ></i>
      </div>
      <div class="edit-icon">
        <i
          class="bi bi-search-heart"
          (click)="goToDictionary()"
          title="Íµ≠Ïñ¥ÏÇ¨Ï†Ñ"
        ></i>
      </div>
      }

      <!-- Ïù¥ ÏïÑÏù¥ÏΩòÎßå Ïò§Î•∏Ï™Ω ÎÅùÏúºÎ°ú -->
      <i
        class="bi bi-arrow-down-right-circle ms-auto"
        (click)="hideMenu()"
        title="Î©îÎâ¥ Ïà®Í∏∞Í∏∞"
      ></i>
    </div>
  </div>
  }

  <!-- Î©îÎâ¥ Ï∂ïÏÜå-->
  @if(showMiniMenu == false){
  <i
    class="bi bi-arrow-up-left-circle-fill blog-menu-show-icon"
    (click)="showMenu()"
    title="Î©îÎâ¥ Ïó¥Í∏∞"
  ></i>
  }
</div>
